# -*- coding: utf-8 -*-
"""Untitled0.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1MopaqWhuW-IBe0pPGG6G-OphdtyXSxG7
"""

import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# åŠ è½½æ•°æ®
@st.cache
def load_data():
    # ä½¿ç”¨GitHubä¸Šçš„CSVæ–‡ä»¶é“¾æ¥æˆ–æœ¬åœ°æ–‡ä»¶è·¯å¾„
    url = "https://raw.githubusercontent.com/Mhu0824/Streamlit/0cf50d29b8420dec4063fac0a9641bd68a9b28f0/movies_dataset1.csv"
    return pd.read_csv(url, encoding='ISO-8859-1')

# æ•°æ®åŠ è½½
df = load_data()

# æ ‡é¢˜
st.title("ğŸ¬ Movie Data Dashboard")

# æ•°æ®æ¦‚è§ˆ
st.header("Overview")
st.write("Dataset Snapshot:")
st.dataframe(df.head())

st.header("Genre Distribution")

# åŠŸèƒ½ 1: ç”µå½±ç±»å‹åˆ†å¸ƒ
st.header("Genre Distribution")

# åˆå¹¶ç”µå½±ç±»å‹åˆ—
genres = pd.concat([df['genre_1'], df['genre_2'], df['genre_3']]).dropna()

# è®¡ç®—ç±»å‹åˆ†å¸ƒ
genre_counts = genres.value_counts()

# å°†å‰15ä¸ªç±»å‹ä¿ç•™ï¼Œå…¶ä½™åˆå¹¶ä¸º"Other"
top_genres = genre_counts.head(25)
other_count = genre_counts[25:].sum()
top_genres["Other"] = other_count

# æ˜¾ç¤ºå‰25ä¸ªç±»å‹å’Œå®ƒä»¬çš„æ•°é‡
st.write("Top 25 Genres and Their Counts:")
st.write(top_25_genres)

# æ˜¾ç¤ºæŸ±çŠ¶å›¾
st.bar_chart(top_genres)
